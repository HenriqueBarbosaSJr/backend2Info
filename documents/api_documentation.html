<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentação da API</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2, h3, h4 {
            color: #0056b3;
        }
        h1 {
            text-align: center;
            border-bottom: 2px solid #0056b3;
            padding-bottom: 10px;
        }
        h2 {
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            margin-top: 25px;
        }
        h3 {
            margin-top: 20px;
        }
        .endpoint {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .method {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 3px;
            color: white;
            display: inline-block;
            margin-right: 10px;
        }
        .get { background-color: #007bff; }
        .post { background-color: #28a745; }
        .put { background-color: #ffc107; color: #333; }
        .delete { background-color: #dc3545; }
        code {
            background-color: #e9e9e9;
            padding: 2px 5px;
            border-radius: 3px;
        }
        pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>

    <div style="text-align: center; margin-bottom: 20px;">
        <img src="/images/api.png" alt="Ícone da API" width="150" height="150">
    </div>

    <h1>Documentação da API</h1>

        <p>
        Bem-vindo à documentação da nossa API! Esta interface foi projetada para facilitar a integração e o gerenciamento de dados essenciais do sistema, como clientes, produtos, fornecedores e compras.
    </p>
    <p>
        Seguindo os princípios REST, a API utiliza os métodos HTTP padrão (GET, POST, PUT, DELETE) e se comunica através do formato JSON, garantindo previsibilidade e facilidade de uso.
    </p>
    <p>
        Neste documento, você encontrará primeiro uma descrição detalhada da estrutura do banco de dados para entender o modelo de dados. Em seguida, apresentamos a lista completa de endpoints disponíveis, com exemplos de requisições e respostas para cada operação.
    </p>

    <!-- Seção Estrutura do Banco de Dados -->
    <h2>Estrutura do Banco de Dados</h2>
    <p>A seguir, a estrutura detalhada das tabelas do banco de dados.</p>

    <div class="endpoint">
        <h3>Tabela: <code>fornecedor</code></h3>
        <pre>
- codfor (SERIAL, PRIMARY KEY)
- nome (VARCHAR(45))
- email (VARCHAR(30))
- uf (CHAR(2))
- password (VARCHAR(60))
- level (INTEGER)
- createdat (TIMESTAMP, DEFAULT CURRENT_TIMESTAMP)
        </pre>
    </div>

    <div class="endpoint">
        <h3>Tabela: <code>produtos</code></h3>
        <pre>
- codpro (SERIAL, PRIMARY KEY)
- nome (VARCHAR(255), NOT NULL)
- descri (TEXT)
- fabricante (VARCHAR(255))
- qtda (INTEGER)
- preco (NUMERIC(10,2))
- custo (NUMERIC(10,2))
- data (TIMESTAMP, DEFAULT CURRENT_TIMESTAMP)
        </pre>
    </div>

    <div class="endpoint">
        <h3>Tabela: <code>clientes</code></h3>
        <pre>
- codcli (SERIAL, PRIMARY KEY)
- nome (VARCHAR(45), NOT NULL)
- email (VARCHAR(45), NOT NULL)
- uf (VARCHAR(45), NOT NULL)
- password (VARCHAR(100), NOT NULL)
- level (INTEGER, NOT NULL)
- createdat (TIMESTAMP, DEFAULT CURRENT_TIMESTAMP)
- image (BYTEA)
        </pre>
    </div>

    <div class="endpoint">
        <h3>Tabela: <code>compras</code></h3>
        <pre>
- codcomp (SERIAL, PRIMARY KEY)
- codcli (INTEGER, NOT NULL, FOREIGN KEY -> public.clientes.codcli)
- codpro (INTEGER, NOT NULL, FOREIGN KEY -> public.produtos.codpro)
- qtda (INTEGER)
- preco (NUMERIC(10,2))
- datacomp (TIMESTAMP, NOT NULL, DEFAULT CURRENT_TIMESTAMP)
        </pre>
    </div>

    <hr style="margin: 30px 0;">

    <h2>Endpoints da API</h2>

    <!-- Seção Fornecedores -->
    <h3>Fornecedores</h3>

    <div class="endpoint">
        <h4><span class="method get">GET</span> /fornecedorcod</h4>
        <p>Retorna todos os fornecedores cadastrados, ordenados pelo código.</p>
        <p><strong>Status Codes:</strong></p>
        <ul>
            <li>200: Sucesso - Retorna a lista de fornecedores</li>
        </ul>
        <p><strong>Exemplo de Resposta (200):</strong></p>
        <pre>[
    {
        "codfor": 1,
        "nome": "Fornecedor A",
        "email": "contato@fornecedora.com",
        "uf": "SP",
        "level": 1
    },
    ...
]</pre>
    </div>

    <div class="endpoint">
        <h4><span class="method get">GET</span> /fornecedor/:codfor</h4>
         <div style="display: flex; align-items: center; gap: 10px;">
            <h4 style="margin: 0;">New endpoint</h4>
            <img src="/images/newimage.gif" alt="" width="120" height="120">
         </div>
        <p>Retorna os dados de um fornecedor específico pelo seu código.</p>
        <p><strong>Parâmetros na URL:</strong></p>
        <ul>
            <li><code>codfor</code> (integer): Código do fornecedor a ser consultado.</li>
        </ul>
        <p><strong>Status Codes:</strong></p>
        <ul>
            <li>200: Sucesso - Retorna os dados do fornecedor</li>
            <li>404: Erro - Fornecedor não encontrado</li>
            <li>500: Erro - Erro ao buscar fornecedor</li>
        </ul>
        <p><strong>Exemplo de Resposta (200):</strong></p>
        <pre>{
    "codfor": 1,
    "nome": "Fornecedor A",
    "email": "contato@fornecedora.com",
    "uf": "SP",
    "level": 1,
    "createdat": "2025-11-03T10:00:00.000Z"
}</pre>
        <p><strong>Exemplo de Erro (404):</strong></p>
        <pre>{
    "msg": "Fornecedor não encontrado"
}</pre>
    </div>

    <div class="endpoint">
        <h4><span class="method get">GET</span> /fornecedornome</h4>
        <p>Retorna todos os fornecedores cadastrados, ordenados pelo nome.</p>
        <p><strong>Status Codes:</strong></p>
        <ul>
            <li>200: Sucesso - Retorna a lista de fornecedores ordenada por nome</li>
        </ul>
        <p><strong>Exemplo de Resposta (200):</strong></p>
        <pre>[
    {
        "codfor": 2,
        "nome": "Alfa Suprimentos",
        "email": "alfa@suprimentos.com",
        "uf": "SP",
        "level": 1
    },
    ...
]</pre>
    </div>

    <div class="endpoint">
        <h4><span class="method get">GET</span> /fornecedorByNome/:nome</h4>
        <p>Busca fornecedores cujo nome contenha o termo pesquisado.</p>
        <p><strong>Parâmetros na URL:</strong></p>
        <ul>
            <li><code>nome</code> (string): Termo a ser buscado no nome do fornecedor.</li>
        </ul>
        <p><strong>Status Codes:</strong></p>
        <ul>
            <li>200: Sucesso - Retorna a lista de fornecedores que correspondem ao termo</li>
            <li>400: Erro - Nome não fornecido</li>
            <li>500: Erro - Erro ao buscar fornecedor por nome</li>
        </ul>
        <p><strong>Exemplo de Resposta (200):</strong></p>
        <pre>[
    {
        "codfor": 1,
        "nome": "Fornecedor ABC",
        "email": "abc@fornecedor.com",
        "uf": "SP",
        "level": 1
    }
]</pre>
        <p><strong>Exemplo de Erro (400):</strong></p>
        <pre>{
    "msg": "Nome é obrigatório para o filtro."
}</pre>
    </div>

    <div class="endpoint">
        <h4><span class="method post">POST</span> /fornecedor</h4>
        <p>Cadastra um novo fornecedor.</p>
        <p><strong>Corpo da Requisição (JSON):</strong></p>
        <pre>{
    "nome": "Novo Fornecedor",
    "email": "novo@fornecedor.com",
    "uf": "RJ",
    "password": "senhaSegura",
    "level": 1
}</pre>
        <p><strong>Status Codes:</strong></p>
        <ul>
            <li>201: Sucesso - Fornecedor criado com sucesso</li>
        </ul>
        <p><strong>Exemplo de Resposta (201):</strong></p>
        <pre>{
    "nome": "Novo Fornecedor",
    "email": "novo@fornecedor.com",
    "uf": "RJ",
    "password": "senhaSegura",
    "level": 1
}</pre>
    </div>

    <div class="endpoint">
        <h4><span class="method put">PUT</span> /fornecedor/:codfor</h4>
        <p>Atualiza os dados de um fornecedor existente.</p>
        <p><strong>Parâmetros na URL:</strong></p>
        <ul>
            <li><code>codfor</code> (integer): Código do fornecedor a ser atualizado.</li>
        </ul>
        <p><strong>Corpo da Requisição (JSON):</strong></p>
        <pre>{
    "nome": "Fornecedor Nome Atualizado",
    "email": "email.atualizado@fornecedor.com",
    "uf": "MG",
    "password": "novaSenha",
    "level": 2
}</pre>
        <p><strong>Status Codes:</strong></p>
        <ul>
            <li>201: Sucesso - Fornecedor atualizado com sucesso</li>
        </ul>
        <p><strong>Exemplo de Resposta (201):</strong></p>
        <pre>{
    "msg": "Atualização efetuada com sucesso !!!!"
}</pre>
    </div>

    <div class="endpoint">
        <h4><span class="method delete">DELETE</span> /fornecedor/:codfor</h4>
        <p>Exclui um fornecedor.</p>
        <p><strong>Parâmetros na URL:</strong></p>
        <ul>
            <li><code>codfor</code> (integer): Código do fornecedor a ser excluído.</li>
        </ul>
        <p><strong>Status Codes:</strong></p>
        <ul>
            <li>200: Sucesso - Fornecedor excluído com sucesso</li>
            <li>400: Erro - Código do fornecedor não fornecido</li>
            <li>404: Erro - Fornecedor não encontrado</li>
            <li>500: Erro - Erro ao excluir fornecedor</li>
        </ul>
        <p><strong>Exemplo de Resposta (200):</strong></p>
        <pre>{
    "msg": "Exclusão efetuada com sucesso!"
}</pre>
        <p><strong>Exemplo de Erro (404):</strong></p>
        <pre>{
    "msg": "Fornecedor não encontrado"
}</pre>
    </div>

    <!-- Seção Produtos -->
    <h3>Produtos</h3>
    <div class="endpoint">
        <h4><span class="method get">GET</span> /produtos</h4>
        <p>Retorna todos os produtos cadastrados, ordenados pelo código.</p>
        <p><strong>Status Codes:</strong></p>
        <ul>
            <li>200: Sucesso - Lista de produtos retornada</li>
            <li>500: Erro - Tabela vazia ou erro ao buscar produtos</li>
        </ul>
        <p><strong>Exemplo de Resposta (200):</strong></p>
    </div>

    <div class="endpoint">
        <h4><span class="method get">GET</span> /produtos/:codpro</h4>
        <p>Retorna as informações de um produto específico pelo seu código.</p>
        <p><strong>Parâmetros na URL:</strong></p>
        <ul>
            <li><code>codpro</code> (integer): Código do produto a ser consultado.</li>
        </ul>
        <p><strong>Status Codes:</strong></p>
        <ul>
            <li>200: Sucesso - Retorna os dados do produto</li>
            <li>404: Erro - Produto não encontrado</li>
            <li>500: Erro - Erro ao buscar produto</li>
        </ul>
        <p><strong>Exemplo de Resposta (200):</strong></p>
        <pre>{
    "codpro": 1,
    "nome": "Produto Exemplo",
    "descri": "Descrição do produto",
    "fabricante": "Fabricante XYZ",
    "qtda": 100,
    "preco": 29.90,
    "custo": 15.50,
    "data": "2025-11-03T10:00:00.000Z"
}</pre>
        <p><strong>Exemplo de Erro (404):</strong></p>
        <pre>{
    "msg": "Produto não encontrado"
}</pre>
        <pre>[
    {
        "codpro": 1,
        "nome": "Produto Exemplo",
        "descri": "Descrição detalhada do produto",
        "fabricante": "Fabricante X",
        "qtda": 100,
        "preco": 99.99,
        "custo": 50.00
    },
    ...
]</pre>
        <p><strong>Exemplo de Erro (500):</strong></p>
        <pre>{
    "msg": "Tabela vazia, nenhum registro encontrado!!"
}</pre>
    </div>

    <!-- Seção Clientes -->
    <h3>Clientes</h3>
    <div class="endpoint">
        <h4><span class="method get">GET</span> /clientes</h4>
        <p>Retorna todos os clientes cadastrados, ordenados pelo código.</p>
        <p><strong>Status Codes:</strong></p>
        <ul>
            <li>200: Sucesso - Lista de clientes retornada</li>
            <li>500: Erro - Erro interno ao buscar clientes</li>
        </ul>
        <p><strong>Exemplo de Resposta (200):</strong></p>
        <pre>{
    "msg": "Clientes encontrados com sucesso",
    "dados": [
        {
            "codcli": 1,
            "nome": "Cliente Exemplo",
            "email": "cliente@exemplo.com",
            "uf": "SP",
            "level": 1,
            "createdat": "2025-10-18T10:00:00Z"
        },
        ...
    ]
}</pre>
        <p><strong>Exemplo de Resposta (200 - Sem dados):</strong></p>
        <pre>{
    "msg": "Nenhum cliente encontrado",
    "dados": []
}</pre>
    </div>

    <div class="endpoint">
        <h4><span class="method post">POST</span> /clientes</h4>
        <p>Cadastra um novo cliente.</p>
        <p><strong>Corpo da Requisição (JSON):</strong></p>
        <pre>{
    "nome": "Novo Cliente",
    "email": "cliente@email.com",
    "uf": "SP",
    "password": "senhaSegura",
    "level": 1
}</pre>
        <p><strong>Status Codes:</strong></p>
        <ul>
            <li>201: Sucesso - Cliente criado com sucesso</li>
            <li>400: Erro - Email já cadastrado ou erro na requisição</li>
            <li>500: Erro - Erro interno ao criar cliente</li>
        </ul>
        <p><strong>Exemplo de Sucesso (201):</strong></p>
        <pre>{
    "msg": "Cliente criado com sucesso",
    "dados": {
        "nome": "Novo Cliente",
        "email": "cliente@email.com",
        "uf": "SP",
        "level": 1
    }
}</pre>
        <p><strong>Exemplo de Erro (400):</strong></p>
        <pre>{
    "erro": "Email já cadastrado!"
}</pre>
        <p><strong>Exemplo de Erro (500):</strong></p>
        <pre>{
    "error": "Erro interno ao criar cliente"
}</pre>
    </div>

    <!-- Seção Compras -->
    <h3>Compras</h3>
    <div class="endpoint">
        <h4><span class="method get">GET</span> /compras</h4>
        <p>Retorna todas as compras registradas, ordenadas pelo código da compra.</p>
        <p><strong>Status Codes:</strong></p>
        <ul>
            <li>200: Sucesso - Lista de compras retornada (mesmo que vazia)</li>
            <li>500: Erro - Erro interno ao buscar compras</li>
        </ul>
        <p><strong>Exemplo de Resposta (200 - Com dados):</strong></p>
        <pre>{
    "msg": "Compras encontradas com sucesso",
    "dados": [
        {
            "codcomp": 1,
            "codcli": 1,
            "codpro": 1,
            "qtda": 2,
            "preco": 99.99,
            "datacomp": "2025-10-18T10:00:00Z"
        },
        ...
    ]
}</pre>
        <p><strong>Exemplo de Resposta (200 - Sem dados):</strong></p>
        <pre>{
    "msg": "Nenhuma compra encontrada",
    "dados": []
}</pre>
        <p><strong>Exemplo de Erro (500):</strong></p>
        <pre>{
    "msg": "Erro interno ao buscar compras",
    "error": "detalhes do erro"
}</pre>
    </div>

    <div class="endpoint">
        <h4><span class="method post">POST</span> /compras</h4>
        <p>Registra uma nova compra. O sistema valida se o cliente (<code>codcli</code>) e o produto (<code>codpro</code>) existem antes de registrar a compra.</p>
        <p><strong>Corpo da Requisição (JSON):</strong></p>
        <pre>{
    "codcli": 1,
    "codpro": 1,
    "qtda": 2,
    "preco": 50.00
}</pre>
        <p><strong>Tipos de Dados:</strong></p>
        <ul>
            <li><code>codcli</code> (integer): Código do cliente.</li>
            <li><code>codpro</code> (integer): Código do produto.</li>
            <li><code>qtda</code> (integer): Quantidade comprada.</li>
            <li><code>preco</code> (decimal/float): Preço unitário no momento da compra.</li>
        </ul>
        <p><strong>Status Codes:</strong></p>
        <ul>
            <li>201: Sucesso - Compra registrada com sucesso</li>
            <li>400: Erro - Campos obrigatórios não fornecidos</li>
            <li>404: Erro - Cliente ou produto não encontrado</li>
            <li>500: Erro - Erro interno ao processar a compra</li>
        </ul>
        <p><strong>Exemplo de Resposta (201):</strong></p>
        <pre>{
    "msg": "Compra registrada com sucesso",
    "dados": {
        "codcli": 1,
        "codpro": 1,
        "qtda": 2,
        "preco": 50.00
    }
}</pre>
        <p><strong>Exemplos de Erro:</strong></p>
        <p>400 - Campos obrigatórios:</p>
        <pre>{
    "msg": "Todos os campos são obrigatórios: codcli, codpro, qtda, preco"
}</pre>
        <p>404 - Cliente não encontrado:</p>
        <pre>{
    "msg": "Cliente não encontrado",
    "codcli": 1
}</pre>
        <p>404 - Produto não encontrado:</p>
        <pre>{
    "msg": "Produto não encontrado",
    "codpro": 1
}</pre>
        <p>500 - Erro interno:</p>
        <pre>{
    "msg": "Erro interno ao processar a compra",
    "error": "detalhes do erro"
}</pre>
    </div>

</body>
</html>
