<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentação da API</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2, h3, h4 {
            color: #0056b3;
        }
        h1 {
            text-align: center;
            border-bottom: 2px solid #0056b3;
            padding-bottom: 10px;
        }
        h2 {
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            margin-top: 25px;
        }
        h3 {
            margin-top: 20px;
        }
        .endpoint {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .method {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 3px;
            color: white;
            display: inline-block;
            margin-right: 10px;
        }
        .get { background-color: #007bff; }
        .post { background-color: #28a745; }
        .put { background-color: #ffc107; color: #333; }
        .delete { background-color: #dc3545; }
        code {
            background-color: #e9e9e9;
            padding: 2px 5px;
            border-radius: 3px;
        }
        pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>

    <div style="text-align: center; margin-bottom: 20px;">
        <img src="/images/api.png" alt="Ícone da API" width="150" height="150">
    </div>

    <h1>Documentação da API</h1>

        <p>
        Bem-vindo à documentação da nossa API! Esta interface foi projetada para facilitar a integração e o gerenciamento de dados essenciais do sistema, como clientes, produtos, fornecedores e compras.
    </p>
    <p>
        Seguindo os princípios REST, a API utiliza os métodos HTTP padrão (GET, POST, PUT, DELETE) e se comunica através do formato JSON, garantindo previsibilidade e facilidade de uso.
    </p>
    <p>
        Neste documento, você encontrará primeiro uma descrição detalhada da estrutura do banco de dados para entender o modelo de dados. Em seguida, apresentamos a lista completa de endpoints disponíveis, com exemplos de requisições e respostas para cada operação.
    </p>

    <!-- Seção Estrutura do Banco de Dados -->
    <h2>Estrutura do Banco de Dados</h2>
    <p>A seguir, a estrutura detalhada das tabelas do banco de dados.</p>

    <div class="endpoint">
        <h3>Tabela: <code>fornecedor</code></h3>
        <pre>
- codfor (SERIAL, PRIMARY KEY)
- nome (VARCHAR(45))
- email (VARCHAR(30))
- uf (CHAR(2))
- password (VARCHAR(60))
- level (INTEGER)
- createdat (TIMESTAMP, DEFAULT CURRENT_TIMESTAMP)
        </pre>
    </div>

    <div class="endpoint">
        <h3>Tabela: <code>produtos</code></h3>
        <pre>
- codpro (SERIAL, PRIMARY KEY)
- nome (VARCHAR(255), NOT NULL)
- descri (TEXT)
- fabricante (VARCHAR(255))
- qtda (INTEGER)
- preco (NUMERIC(10,2))
- custo (NUMERIC(10,2))
- data (TIMESTAMP, DEFAULT CURRENT_TIMESTAMP)
        </pre>
    </div>

    <div class="endpoint">
        <h3>Tabela: <code>clientes</code></h3>
        <pre>
- codcli (SERIAL, PRIMARY KEY)
- nome (VARCHAR(45), NOT NULL)
- email (VARCHAR(45), NOT NULL)
- uf (VARCHAR(45), NOT NULL)
- password (VARCHAR(100), NOT NULL)
- level (INTEGER, NOT NULL)
- createdat (TIMESTAMP, DEFAULT CURRENT_TIMESTAMP)
- image (BYTEA)
        </pre>
    </div>

    <div class="endpoint">
        <h3>Tabela: <code>compras</code></h3>
        <pre>
- codcomp (SERIAL, PRIMARY KEY)
- codcli (INTEGER, NOT NULL, FOREIGN KEY -> public.clientes.codcli)
- codpro (INTEGER, NOT NULL, FOREIGN KEY -> public.produtos.codpro)
- qtda (INTEGER)
- preco (NUMERIC(10,2))
- datacomp (TIMESTAMP, NOT NULL, DEFAULT CURRENT_TIMESTAMP)
        </pre>
    </div>

    <hr style="margin: 30px 0;">

    <h2>Endpoints da API</h2>

    <!-- Seção Fornecedores -->
    <h3>Fornecedores</h3>

    <div class="endpoint">
        <h4><span class="method get">GET</span> /fornecedorcod</h4>
        <p>Retorna todos os fornecedores cadastrados, ordenados pelo código.</p>
        <p><strong>Resposta (Sucesso 200):</strong></p>
        <pre>[
    {
        "codfor": 1,
        "nome": "Fornecedor A",
        "email": "contato@fornecedora.com",
        "uf": "SP",
        "level": 1
    },
    ...
]</pre>
    </div>

    <div class="endpoint">
        <h4><span class="method get">GET</span> /fornecedornome</h4>
        <p>Retorna todos os fornecedores cadastrados, ordenados pelo nome.</p>
    </div>

    <div class="endpoint">
        <h4><span class="method get">GET</span> /fornecedorByNome/:nome</h4>
        <p>Busca fornecedores cujo nome contenha o termo pesquisado.</p>
        <p><strong>Parâmetros na URL:</strong></p>
        <ul>
            <li><code>nome</code> (string): Termo a ser buscado no nome do fornecedor.</li>
        </ul>
    </div>

    <div class="endpoint">
        <h4><span class="method post">POST</span> /fornecedor</h4>
        <p>Cadastra um novo fornecedor.</p>
        <p><strong>Corpo da Requisição (JSON):</strong></p>
        <pre>{
    "nome": "Novo Fornecedor",
    "email": "novo@fornecedor.com",
    "uf": "RJ",
    "password": "senhaSegura",
    "level": 1
}</pre>
        <p><strong>Resposta (Sucesso 201):</strong></p>
        <pre>{
    "nome": "Novo Fornecedor",
    "email": "novo@fornecedor.com",
    "uf": "RJ",
    "password": "senhaSegura",
    "level": 1
}</pre>
    </div>

    <div class="endpoint">
        <h4><span class="method put">PUT</span> /fornecedor/:codfor</h4>
        <p>Atualiza os dados de um fornecedor existente.</p>
        <p><strong>Parâmetros na URL:</strong></p>
        <ul>
            <li><code>codfor</code> (integer): Código do fornecedor a ser atualizado.</li>
        </ul>
        <p><strong>Corpo da Requisição (JSON):</strong></p>
        <pre>{
    "nome": "Fornecedor Nome Atualizado",
    "email": "email.atualizado@fornecedor.com",
    "uf": "MG",
    "password": "novaSenha",
    "level": 2
}</pre>
    </div>

    <div class="endpoint">
        <h4><span class="method delete">DELETE</span> /fornecedor/:codfor</h4>
        <p>Exclui um fornecedor.</p>
        <p><strong>Parâmetros na URL:</strong></p>
        <ul>
            <li><code>codfor</code> (integer): Código do fornecedor a ser excluído.</li>
        </ul>
    </div>

    <!-- Seção Produtos -->
    <h3>Produtos</h3>
    <div class="endpoint">
        <h4><span class="method get">GET</span> /produtos</h4>
        <p>Retorna todos os produtos cadastrados, ordenados pelo código.</p>
        <p><strong>Resposta (Sucesso 200):</strong></p>
        <pre>[
    {
        "codpro": 1,
        "descricao": "Produto Exemplo",
        "preco": 99.99,
        "qtda": 100
    },
    ...
]</pre>
    </div>

    <!-- Seção Clientes -->
    <h3>Clientes</h3>
    <div class="endpoint">
        <h4><span class="method get">GET</span> /clientes</h4>
        <p>Retorna todos os clientes cadastrados, ordenados pelo código.</p>
        <p><strong>Resposta (Sucesso 200):</strong></p>
        <pre>[
    {
        "codcli": 1,
        "nome": "Cliente Exemplo",
        "endereco": "Rua Exemplo, 123"
    },
    ...
]</pre>
    </div>

    <!-- Seção Compras -->
    <h3>Compras</h3>
    <div class="endpoint">
        <h4><span class="method get">GET</span> /compras</h4>
        <p>Retorna todas as compras registradas, ordenadas pelo código da compra.</p>
    </div>

    <div class="endpoint">
        <h4><span class="method post">POST</span> /compras</h4>
        <p>Registra uma nova compra. O sistema valida se o cliente (<code>codcli</code>) e o produto (<code>codpro</code>) existem antes de registrar a compra.</p>
        <p><strong>Corpo da Requisição (JSON):</strong></p>
        <pre>{
    "codcli": 1,
    "codpro": 1,
    "qtda": 2,
    "preco": 50.00
}</pre>
        <p><strong>Tipos de Dados:</strong></p>
        <ul>
            <li><code>codcli</code> (integer): Código do cliente.</li>
            <li><code>codpro</code> (integer): Código do produto.</li>
            <li><code>qtda</code> (integer): Quantidade comprada.</li>
            <li><code>preco</code> (decimal/float): Preço unitário no momento da compra.</li>
        </ul>
        <p><strong>Resposta (Sucesso 201):</strong></p>
        <pre>{
    "codcli": 1,
    "codpro": 1,
    "qtda": 2,
    "preco": 50.00
}</pre>
        <p><strong>Respostas de Erro:</strong></p>
        <ul>
            <li>Status 200 com <code>{ "msg": "Error cliente não cadastrado" }</code> se o <code>codcli</code> não existir.</li>
            <li>Status 200 com <code>{ "msg": "Error produto não cadastrado" }</code> se o <code>codpro</code> não existir.</li>
        </ul>
    </div>

</body>
</html>
